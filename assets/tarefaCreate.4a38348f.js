var l=Object.defineProperty;var d=(r,t,e)=>t in r?l(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e;var a=(r,t,e)=>(d(r,typeof t!="symbol"?t+"":t,e),e);import"./modulepreload-polyfill.c7c6310f.js";import{E as n}from"./entidade.model.11441dea.js";import{T as c}from"./tarefa.repository.ls.003c8bae.js";import"./guid.model.a7d4f54b.js";class u extends n{constructor(e,i,o){super();a(this,"titulo");a(this,"prioridade");a(this,"dataCriacao");a(this,"DataConclusao");o&&(this.id=o),this.titulo=e,this.prioridade=i,this.dataCriacao=new Date}}class f{constructor(t,e){a(this,"txtTitulo");a(this,"selectPrioridade");a(this,"btnSalvar");a(this,"idSelecionado");if(this.repositorioTaefas=t,this.configurarElementos(),e){this.idSelecionado=e;const i=this.repositorioTaefas.selecionarPorId(e);i&&this.preencherFormulario(i)}}gravarRegistros(){const t=this.obterDadosFormularios();if(!this.validarTituloTarefa(t)){alert("O campo t\xEDtulo n\xE3o pode fica vazio!");return}if(this.tarefaExistente(t)){alert("Tarefa duplicada!");return}t.id?this.repositorioTaefas.editar(t.id,t):this.repositorioTaefas.inserir(t),window.location.href="tarefa.list.html"}preencherFormulario(t){this.txtTitulo.value=t.titulo,this.selectPrioridade.value=t.prioridade}obterDadosFormularios(){const t=this.txtTitulo.value,e=this.selectPrioridade.value,i=new u(t,e);return i.id=this.idSelecionado,i}configurarElementos(){this.txtTitulo=document.getElementById("txtTitulo"),this.selectPrioridade=document.getElementById("selectPrioridade"),this.btnSalvar=document.getElementById("btnSalvar"),this.btnSalvar.addEventListener("click",t=>this.gravarRegistros())}tarefaExistente(t){const e=this.repositorioTaefas.selecionarTodos();let i="",o=!1;return e.forEach(s=>{i=s.titulo,s.id!==t.id&&i===t.titulo&&(o=!0)}),o}validarTituloTarefa(t){return t.titulo!==""}}const h=new URLSearchParams(window.location.search),m=h.get("id");new f(new c,m);
